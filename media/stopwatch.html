<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<style>
	html, body {
		margin: 0;
		padding: 0;
		background: black;
		color: white;
		width: 100%;
		height: 100%;
		font-family: monospace;
		display: flex;
		flex-direction: column;
		align-items: center;
		justify-content: center;
	}

	.quote {
		font-size: 14px;
		opacity: 0.7;
		margin-bottom: 10px;
		text-align: center;
		max-width: 80%;
	}

	.time {
		font-size: 64px;
		font-weight: bold;
		margin: 20px 0;
	}

	.controls {
		display: flex;
		gap: 12px;
	}

	button {
		background: #111;
		color: white;
		border: 1px solid #444;
		padding: 8px 14px;
		cursor: pointer;
		font-family: monospace;
	}

	button:hover {
		background: #222;
	}
</style>
</head>

<body>

<div class="quote" id="quote">Focus. Build. Repeat.</div>
<div class="time" id="time">00:00:00</div>

<div class="controls">
	<button onclick="start()">Start</button>
	<button onclick="stop()">Stop</button>
	<button onclick="reset()">Reset</button>
	<button onclick="pomodoro()">Pomodoro</button>
</div>

<script>
	const vscode = acquireVsCodeApi();

	const QUOTES = [
		"Deep work beats busy work.",
		"Consistency compounds.",
		"Build something today.",
		"Focus is a superpower.",
		"Small wins add up."
	];

	function format(sec) {
		const h = Math.floor(sec / 3600);
		const m = Math.floor((sec % 3600) / 60);
		const s = sec % 60;
		return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
	}

	// ðŸ” Receive ticks from extension host
	window.addEventListener('message', event => {
		const { type, seconds, phase } = event.data;

		if (type === 'tick') {
			document.getElementById('time').innerText = format(seconds);
		}

		if (type === 'phaseChange') {
			updateQuote();
		}
	});

	function updateQuote() {
		const q = QUOTES[Math.floor(Math.random() * QUOTES.length)];
		document.getElementById('quote').innerText = q;
	}

	// ðŸŽ® Controls â†’ send intent to extension
	function start() {
		vscode.postMessage({ type: 'start' });
	}

	function stop() {
		vscode.postMessage({ type: 'stop' });
	}

	function reset() {
		vscode.postMessage({ type: 'reset' });
	}

	function pomodoro() {
		vscode.postMessage({ type: 'pomodoro' });
	}
</script>

</body>
</html>
